<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TrustOrigin Registry Lookup</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #f6f7fb;
      color: #111;
      margin: 0;
      padding: 3rem 1rem;
    }

    .container {
      max-width: 960px;
      margin: 0 auto;
      background: #fff;
      padding: 2.5rem;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.06);
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 0.75rem;
    }

    p {
      line-height: 1.6;
      margin: 0.5rem 0 1rem 0;
    }

    .status-box {
      background: #f1f3f6;
      border-radius: 8px;
      padding: 1rem 1.25rem;
      margin: 1.5rem 0;
      font-size: 0.95rem;
    }

    .status-box strong {
      font-weight: 600;
    }

    .notice {
      margin-top: 1.5rem;
      font-size: 0.9rem;
      color: #333;
    }

    .notice strong {
      display: block;
      margin-bottom: 0.25rem;
    }

    .court-interpretation {
      margin-top: 2.5rem;
      padding-top: 2rem;
      border-top: 1px solid #e5e7eb;
      font-size: 0.9rem;
      color: #2a2a2a;
    }

    .court-interpretation h2 {
      font-size: 1.05rem;
      font-weight: 600;
      margin-bottom: 0.75rem;
    }
  </style>
</head>

<body>

  <div class="container">

    <h1>TrustOrigin Registry Lookup</h1>

    <p>
      This public lookup checks for the presence of a technical record within the TrustOrigin registry using a deterministic hash reference.
    </p>

    <div class="status-box" id="result">
      <strong>Status:</strong> Awaiting lookup parameters.
    </div>

    <div class="notice">
      <strong>Important:</strong>
      This lookup indicates registry presence only.
      TrustOrigin does not verify, validate, certify, authenticate, interpret,
      or assess the asset, its origin, authorship, timing, or legal effect.
    </div>

    <!-- COURT-FACING INTERPRETATION -->
    <section class="court-interpretation" id="court-interpretation">
      <h2>Registry Lookup – Technical and Evidentiary Interpretation</h2>

      <p>
        The TrustOrigin Registry Lookup provides a deterministic, technical response indicating
        whether a registry entry corresponding to the supplied hash reference exists within
        the registry at the time of the query.
      </p>

      <p>
        A positive or negative lookup result reflects registry presence status only.
        It does not constitute verification, validation, authentication, certification,
        or endorsement of the referenced asset, nor does it express any opinion as to the
        asset’s authenticity, authorship, provenance, integrity, ownership, timing,
        or legal significance.
      </p>

      <p>
        The TrustOrigin registry operates as a neutral, append-only technical index.
        It does not perform analysis, evaluation, judgement, or interpretation and does
        not replace independent verification, expert assessment, contractual analysis,
        or judicial determination.
      </p>

      <p>
        Lookup responses are generated solely from the supplied parameters and the
        registry’s internal technical state at the moment of the request.
        No personal data is processed as part of this operation.
      </p>
    </section>

  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const algorithm = params.get("algorithm");
    const hash = params.get("hash");

    if (algorithm && hash) {
      fetch("/api/lookup", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          lookup_type: "hash_lookup",
          algorithm: algorithm,
          hash: hash
        })
      })
      .then(r => r.json())
      .then(data => {
        document.getElementById("result").innerHTML =
          "<strong>Result:</strong> " +
          (data.record_present ? "Record present in registry" : "No matching record present") +
          "<br><br>" +
          "Algorithm: <code>" + algorithm + "</code><br>" +
          "Hash: <code>" + hash + "</code>";
      })
      .catch(() => {
        document.getElementById("result").innerHTML =
          "<strong>Error:</strong> Lookup service unavailable.";
      });
    }
  </script>

</body>
</html>
